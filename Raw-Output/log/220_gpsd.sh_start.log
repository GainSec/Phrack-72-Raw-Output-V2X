+ . /mnt/c3platpersistent/share/startup/common.sh
++ source /etc/os-release
+++ PRETTY_NAME='Debian GNU/Linux 9 (stretch)'
+++ NAME='Debian GNU/Linux'
+++ VERSION_ID=9
+++ VERSION='9 (stretch)'
+++ VERSION_CODENAME=stretch
+++ ID=debian
+++ HOME_URL=https://www.debian.org/
+++ SUPPORT_URL=https://www.debian.org/support
+++ BUG_REPORT_URL=https://bugs.debian.org/
++ export DEBIAN_VERSION=9
++ DEBIAN_VERSION=9
++ export LD_LIBRARY_PATH=/mnt/c3platpersistent/lib/deb9:/mnt/c3platpersistent/lib
++ LD_LIBRARY_PATH=/mnt/c3platpersistent/lib/deb9:/mnt/c3platpersistent/lib
+++ basename -- /mnt/c3platpersistent/etc/startup.d//220_gpsd.sh
++ APP_SCR=220_gpsd.sh
+++ readlink -f -- /mnt/c3platpersistent/etc/startup.d//220_gpsd.sh
++ ACT_DIR=/mnt/c3platpersistent/etc/startup.d/220_gpsd.sh
+++ dirname /mnt/c3platpersistent/etc/startup.d/220_gpsd.sh
++ ABS_PATH=/mnt/c3platpersistent/etc/startup.d
++ ENABLE_LED_HANDLER=false
++ LED_STARTUP_PID=/var/run/flash_pid.startup
++ LED_HANDLER_IP=127.0.0.1
++ LED_HANDLER_PORT=6001
++ LED_HANDLER_AIRLINK_STATISTICS=tx
++ ETH_IF=eth0
++ [[ -n /mnt/c3platpersistent ]]
+++ cat /mnt/c3platpersistent/etc/issue
+++ head -n 1
++ export VARIANTRS=USDoT-NAStack
++ VARIANTRS=USDoT-NAStack
++ export WATCHDOG_SCRIPTS_PATH=/var/run/supervision/scripts
++ WATCHDOG_SCRIPTS_PATH=/var/run/supervision/scripts
++ mkdir -p /var/run/supervision/scripts
++ [[ false == false ]]
++ export ROADSIDE_IPTABLES_ENABLED=true
++ ROADSIDE_IPTABLES_ENABLED=true
++ export CERTPATH=/mnt/c3platpersistent/share/its-g5-security-certs/
++ CERTPATH=/mnt/c3platpersistent/share/its-g5-security-certs/
++ export GPSD_DEBUG=0
++ GPSD_DEBUG=0
++ export GPSD_OPTS=
++ GPSD_OPTS=
++ [[ 9 == 9 ]]
++ export PPSDEVICE=/dev/pps1
++ PPSDEVICE=/dev/pps1
++ export GPSD_CYCLE_TIME=1.0
++ GPSD_CYCLE_TIME=1.0
++ [[ USDoT-NAStack =~ .*CCA.* ]]
++ [[ USDoT-NAStack =~ USDoT-QualcommRR ]]
++ export ENABLED_RADIOS=:NXP:
++ ENABLED_RADIOS=:NXP:
++ [[ -e /etc/eeprom-cb/a.dualradio.mode ]]
++ [[ -e /mnt/c3platpersistent/etc/roadside.cfg ]]
++ source /mnt/c3platpersistent/etc/roadside.cfg
+++ export AEROLINK_BASE=/mnt/c3platpersistent/etc/aerolink/ieee
+++ AEROLINK_BASE=/mnt/c3platpersistent/etc/aerolink/ieee
+++ export AEROLINK_CONFIG_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/config/
+++ AEROLINK_CONFIG_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/config/
+++ export AEROLINK_STATE_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/state/
+++ AEROLINK_STATE_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/state/
+++ export INIT_TARGET=./share/urb/cfgdb2stack.usdot.urb
+++ INIT_TARGET=./share/urb/cfgdb2stack.usdot.urb
+ GPSDSCRIPTSRC=/mnt/c3platpersistent/etc/gpsd.in
+ GPSDSCRIPT=/etc/init.d/gpsd
+ PIDFILE=/var/run/gpsd.pid
+ GPSDCONFIG=/etc/default/gpsd
+ GPSMONSCRIPT=/mnt/c3platpersistent/bin/gps_monitor.sh
+ GPSMONPIDFILE=/var/run/gps_monitor.pid
+ PPSGPIO=/dev/gpio_pps_sel
+ '[' -e /var/run/dev/vtty0 ']'
+ '[' -e /dev/ttyGNSS ']'
+ GPSDEVICE=/dev/ttyGNSS
+ CONTROL_CYCLE_TIME=1
+ PPSSOURCE=1
+ GPSD_OPTS+=' -N -n -P /var/run/gpsd.pid'
+ [[ 0 != 0 ]]
+ logger 'Startup::GPSD using device /dev/ttyGNSS'
+ logger 'Startup::GPSD using options  -N -n -P /var/run/gpsd.pid'
+ '[' xstart = xstart ']'
+ echo -n gps:init:v1
+ sudo systemctl stop gpsd
Warning: Stopping gpsd.service, but it can still be activated by:
  gpsd.socket
+ sudo systemctl stop gpsd.socket
+ [[ -z '' ]]
+ GPSD_SHM_KEY=0x47505344
++ ipcs
++ grep 0x47505344
+ [[ -n 0x47505344 262152     root       666        8068       0                        ]]
+ ipcrm -M 0x47505344
+ cp /mnt/c3platpersistent/etc/gpsd.in /etc/init.d/gpsd
+ chmod 0755 /etc/init.d/gpsd
+ cat
+ [[ -e /dev/gpio_pps_sel ]]
+ echo out
+ echo 1
+ [[ 1 == 1 ]]
+ logger 'Startup::GPSD PPS source switchted to GNSS'
++ which ppsctl
+ PPSCTL=/usr/bin/ppsctl
+ [[ -n /usr/bin/ppsctl ]]
+ /usr/bin/ppsctl -a -f /dev/pps1
+ logger 'startup::distributing PPS source thru kernel on /dev/pps1'
+ '[' -x /mnt/c3platpersistent/sbin/gpsd ']'
+ [[ 0 == 0 ]]
+ [[ -e /var/run/gps_monitor.pid ]]
+ /mnt/c3platpersistent/sbin/gpsd -N -n -P /var/run/gpsd.pid /dev/ttyGNSS /dev/pps1
+ echo 2777
+ [[ 1 == 1 ]]
+ /mnt/c3platpersistent/bin/gps_monitor.sh
+ logger 'Startup::GPSD activating watchdog service'
+ chmod 0755 /mnt/c3platpersistent/share/watchdog/test-gpsd.sh
+ cp -rp /mnt/c3platpersistent/share/watchdog/test-gpsd.sh /var/run/supervision/scripts
+ sleep 30
+ logger 'Startup::GPSD setting cycle time to 1.0'
+ gpsctl -c 1.0 /dev/ttyGNSS
+ logger 'Startup::GPSD finished setting cycle time: 0'
