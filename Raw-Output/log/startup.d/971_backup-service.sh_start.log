+ . /mnt/c3platpersistent/share/startup/common.sh
++ source /etc/os-release
+++ PRETTY_NAME='Debian GNU/Linux 9 (stretch)'
+++ NAME='Debian GNU/Linux'
+++ VERSION_ID=9
+++ VERSION='9 (stretch)'
+++ VERSION_CODENAME=stretch
+++ ID=debian
+++ HOME_URL=https://www.debian.org/
+++ SUPPORT_URL=https://www.debian.org/support
+++ BUG_REPORT_URL=https://bugs.debian.org/
++ export DEBIAN_VERSION=9
++ DEBIAN_VERSION=9
++ export LD_LIBRARY_PATH=/mnt/c3platpersistent/lib/deb9:/mnt/c3platpersistent/lib
++ LD_LIBRARY_PATH=/mnt/c3platpersistent/lib/deb9:/mnt/c3platpersistent/lib
+++ basename -- /mnt/c3platpersistent/etc/startup.d//971_backup-service.sh
++ APP_SCR=971_backup-service.sh
+++ readlink -f -- /mnt/c3platpersistent/etc/startup.d//971_backup-service.sh
++ ACT_DIR=/mnt/c3platpersistent/etc/startup.d/971_backup-service.sh
+++ dirname /mnt/c3platpersistent/etc/startup.d/971_backup-service.sh
++ ABS_PATH=/mnt/c3platpersistent/etc/startup.d
++ ENABLE_LED_HANDLER=false
++ LED_STARTUP_PID=/var/run/flash_pid.startup
++ LED_HANDLER_IP=127.0.0.1
++ LED_HANDLER_PORT=6001
++ LED_HANDLER_AIRLINK_STATISTICS=tx
++ ETH_IF=eth0
++ [[ -n /mnt/c3platpersistent ]]
+++ cat /mnt/c3platpersistent/etc/issue
+++ head -n 1
++ export VARIANTRS=USDoT-NAStack
++ VARIANTRS=USDoT-NAStack
++ export WATCHDOG_SCRIPTS_PATH=/var/run/supervision/scripts
++ WATCHDOG_SCRIPTS_PATH=/var/run/supervision/scripts
++ mkdir -p /var/run/supervision/scripts
++ [[ false == false ]]
++ export ROADSIDE_IPTABLES_ENABLED=true
++ ROADSIDE_IPTABLES_ENABLED=true
++ export CERTPATH=/mnt/c3platpersistent/share/its-g5-security-certs/
++ CERTPATH=/mnt/c3platpersistent/share/its-g5-security-certs/
++ export GPSD_DEBUG=0
++ GPSD_DEBUG=0
++ export GPSD_OPTS=
++ GPSD_OPTS=
++ [[ 9 == 9 ]]
++ export PPSDEVICE=/dev/pps1
++ PPSDEVICE=/dev/pps1
++ export GPSD_CYCLE_TIME=1.0
++ GPSD_CYCLE_TIME=1.0
++ [[ USDoT-NAStack =~ .*CCA.* ]]
++ [[ USDoT-NAStack =~ USDoT-QualcommRR ]]
++ export ENABLED_RADIOS=:NXP:
++ ENABLED_RADIOS=:NXP:
++ [[ -e /etc/eeprom-cb/a.dualradio.mode ]]
++ [[ -e /mnt/c3platpersistent/etc/roadside.cfg ]]
++ source /mnt/c3platpersistent/etc/roadside.cfg
+++ export AEROLINK_BASE=/mnt/c3platpersistent/etc/aerolink/ieee
+++ AEROLINK_BASE=/mnt/c3platpersistent/etc/aerolink/ieee
+++ export AEROLINK_CONFIG_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/config/
+++ AEROLINK_CONFIG_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/config/
+++ export AEROLINK_STATE_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/state/
+++ AEROLINK_STATE_DIR=/mnt/c3platpersistent/etc/aerolink/ieee/state/
+++ export INIT_TARGET=./share/urb/cfgdb2stack.usdot.urb
+++ INIT_TARGET=./share/urb/cfgdb2stack.usdot.urb
+ BACKUP_SERVICE=bin/backup-service
+ CRON_LINK=/etc/cron.hourly/backup-service
+ PIDFILE=/var/run/backup-service.pid
+ case "$1" in
+ start
+ logger '971_backup-service.sh -I- Starting backup service!'
+ ln -fs /mnt/c3platpersistent/bin/backup-service /etc/cron.hourly/backup-service
+ /etc/init.d/cron restart
Restarting cron (via systemctl): cron.service.
+ sleep 1
+ /mnt/c3platpersistent/bin/backup-service
+ BACKUP_DIR_IMIS=/mnt/c3platpersistent/var/run/imis_app/backup/
+ IMIS_MESSAGE_DIRS=("/var/run/imis_app/upload/" "/var/run/imis_app/download/")
+ LOG_FILE=/var/log/backup-service.log
+ PRESERVE_BACKUPS_MMIN=14400
+ PRESERVE_FILES_MMIN=1440
+ BACKUP_ARCHIVE_NAMING=backup
+ PIDFILE=/var/run/backup-service.pid
+ FILE_LIST=
+ echo 3733
+ backup /mnt/c3platpersistent/var/run/imis_app/backup/ IMIS_MESSAGE_DIRS
+ local backup_dir=/mnt/c3platpersistent/var/run/imis_app/backup/
+ local -n backup_targets=IMIS_MESSAGE_DIRS
++ /bin/date -d '1440 minutes ago' +%d-%m-%Y_%H-%M-%S
+ BACKUP_FILES_OLDER_DATE=11-01-2025_07-59-20
+ log 'Create backup directory...'
+ tee -a /var/log/backup-service.log
++ date '+%Y-%m-%d %T'
+ echo -e '2025-01-12 07:59:20: Create backup directory...'
2025-01-12 07:59:20: Create backup directory...
+ mkdir -p /mnt/c3platpersistent/var/run/imis_app/backup/
+ log 'Remove backups older than 10 days...'
+ tee -a /var/log/backup-service.log
++ date '+%Y-%m-%d %T'
+ echo -e '2025-01-12 07:59:20: Remove backups older than 10 days...'
2025-01-12 07:59:20: Remove backups older than 10 days...
+ findFiles /mnt/c3platpersistent/var/run/imis_app/backup/ 'backup-*.tar.gz' +14400
++ /usr/bin/find /mnt/c3platpersistent/var/run/imis_app/backup/ -iname 'backup-*.tar.gz' -mmin +14400
+ local files=
+ FILE_LIST=
+ [[ ! -z '' ]]
+ [[ ! -z '' ]]
+ log 'Backup files older than 24 hours...'
+ tee -a /var/log/backup-service.log
++ date '+%Y-%m-%d %T'
+ echo -e '2025-01-12 07:59:20: Backup files older than 24 hours...'
2025-01-12 07:59:20: Backup files older than 24 hours...
+ for dir in "${backup_targets[@]}"
+ findFiles /var/run/imis_app/upload/ '*.*' +1440
++ /usr/bin/find /var/run/imis_app/upload/ -iname '*.*' -mmin +1440
/usr/bin/find: ‘/var/run/imis_app/upload/’: No such file or directory
+ local files=
+ FILE_LIST=
+ [[ ! -z '' ]]
+ [[ ! -z '' ]]
+ [[ ! -z '' ]]
+ for dir in "${backup_targets[@]}"
+ findFiles /var/run/imis_app/download/ '*.*' +1440
++ /usr/bin/find /var/run/imis_app/download/ -iname '*.*' -mmin +1440
/usr/bin/find: ‘/var/run/imis_app/download/’: No such file or directory
+ local files=
+ FILE_LIST=
+ [[ ! -z '' ]]
+ [[ ! -z '' ]]
+ [[ ! -z '' ]]
+ [[ -f /mnt/c3platpersistent/var/run/imis_app/backup/backup-11-01-2025_07-59-20.tar ]]
+ rm /var/run/backup-service.pid
+ log '>>> Finish!\n'
+ tee -a /var/log/backup-service.log
++ date '+%Y-%m-%d %T'
+ echo -e '2025-01-12 07:59:20: >>> Finish!\n'
2025-01-12 07:59:20: >>> Finish!

